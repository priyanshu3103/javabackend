/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function t(t,e,s,n){var i,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(o<3?i(r):o>3?i(e,s,r):i(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r}function e(t,e,s,n){return new(s||(s=Promise))((function(i,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function c(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,c)}l((n=n.apply(t,e||[])).next())}))}function s(t){const e=""+~~(t/1e3),s=e.length<4?"0000".substring(e.length)+e:e;return`${s.slice(0,-3)}.${s.slice(-3)}ms`}function n(t){const e=document.querySelector(".tabHolder"),s=document.getElementById(t),n=document.querySelector(".tabber"),i=null==s?void 0:s.dataset.show,o=i?document.getElementById(i):null;null==e||e.querySelectorAll(".tab").forEach((t=>t.classList.remove("selected"))),null==s||s.classList.add("selected"),null==n||n.querySelectorAll(".tabItem").forEach((t=>t.classList.remove("selected"))),o&&o.classList.add("selected")}const i=/^[A-Z_]*$/,o=new Map([["error","rgba(255, 128, 128, 0.2)"],["skip","rgba(128, 255, 128, 0.2)"],["unexpected","rgba(128, 128, 255, 0.2)"]]),r=/\r?\n/,c=/^\d+\.\d+\sAPEX_CODE,\w+;APEX_PROFILING,.+$/m;let l,a=[],d=new Set,u=null,h=0,p=!1;class E{constructor(t){this.lines=t,this.index=0}peek(){return this.index<this.lines.length?this.lines[this.index]:null}fetch(){return this.index<this.lines.length?this.lines[this.index++]:null}}class m{constructor(t,e,s){this.timestamp=t,this.reason=e,this.color=s}}class f{constructor(t){this.timestamp=0,this.type="",this.logLine="",this.text="",this.acceptsText=!1,this.declarative=!1,this.isExit=!1,this.isValid=!0,this.lineNumber=null,this.namespace=null,this.group=null,this.value=null,this.hasValidSymbols=!1,this.suffix=null,this.prefix=null,this.discontinuity=!1,this.rowCount=null,t&&(this.type=t[1],this.timestamp=function(t){const e=t.slice(t.indexOf("(")+1,-1);if(e)return Number(e);throw new Error(`Unable to parse timestamp: '${t}'`)}(t[0]))}getDuration(){return 0}loadContent(t,e){}onEnd(t,e){}onAfter(t){}}class _ extends f{constructor(t,e,s){super(t),this.exitStamp=null,this.duration=null,this.selfTime=null,this.children=[],this.containsDml=0,this.containsSoql=0,this.containsThrown=0,this.timelineKey=e,this.cpuType=s}addChild(t){this.children.push(t)}getDuration(){return this.duration||0}recalculateDurations(){this.exitStamp&&(this.selfTime=this.duration=this.exitStamp-this.timestamp,this.children.forEach((t=>{this.selfTime-=t.getDuration()})))}}class x extends _{constructor(t,e,s,n,i){super(t,n,i),this.isTruncated=!1,this.exitTypes=e,this.classes=s?"node "+s:"node"}isMatchingEnd(t){return this.exitTypes.includes(t.type)&&(!t.lineNumber||!this.lineNumber||t.lineNumber===this.lineNumber)}endMethod(t,e,s){return this.exitStamp=t.timestamp,this.isMatchingEnd(t)?(p=!1,e.fetch(),!0):!!p||(!!s.some((e=>e.isMatchingEnd(t)))||(y(t.timestamp,"Unexpected-Exit","unexpected"),!1))}loadContent(t,e){if(u=this.timestamp,this.exitTypes.length>0){let s;for(e.push(this);s=t.peek();){if(s.discontinuity&&(p=!0),s.isExit&&this.endMethod(s,t,e)){this.onEnd&&this.onEnd(s,e);break}t.fetch(),u=s.timestamp,s.isValid&&s.loadContent(t,e),this.addChild(s)}s||(this.exitStamp=u,y(u,"Unexpected-End","unexpected"),this.isTruncated=!0),e.pop()}this.recalculateDurations()}}class T extends x{constructor(){super(null,[],"root","codeUnit",""),this.text="Log Root",this.type="ROOT",this.timestamp=0,this.exitStamp=0}setEndTime(){let t;for(let e=this.children.length-1;e>=0;e--){const s=this.children[e];if(s instanceof _&&(null!=t||(t=s.exitStamp),"EXECUTION_STARTED"===s.type)){t=s.exitStamp;break}}this.exitStamp=t||0}}class g extends f{constructor(t){super(t),this.hideable=!0}}function y(t,e,s){d.has(e)||(d.add(e),l.push(new m(t,e,o.get(s))))}function v(t){const e=t.slice(1,-1);if(e){const t=Number(e);return Number.isNaN(t)?e:t}throw new Error(`Unable to parse line number: '${t}'`)}function A(t){const e=t.slice(t.indexOf("Rows:")+5);if(e)return Number(e);throw new Error(`Unable to parse row count: '${t}'`)}const N=new Map([["EventService","method"],["Validation","custom"],["Workflow","custom"],["Flow","custom"]]);class I extends x{constructor(t){super(t,["CODE_UNIT_FINISHED"],null,"codeUnit",I.getCpuType(t)),this.suffix=" (entrypoint)";const e=t[3].split(":"),s=t[4]||t[3],n=e[0];switch(n){case"EventService":this.cpuType="method",this.namespace=function(t){const e=t.indexOf("__");return e<0?"unmanaged":t.substring(0,e)}(e[1]),this.group="EventService "+this.namespace,this.text=t[3];break;case"Validation":this.cpuType="custom",this.declarative=!0,this.group="Validation",this.text=s||n+":"+e[1];break;case"Workflow":case"Flow":this.cpuType="custom",this.declarative=!0,this.group=n,this.text=s||n;break;default:this.cpuType="method",(null==s?void 0:s.startsWith("VF:"))&&(this.namespace=function(t){const e=t.indexOf("__");if(e<0)return"unmanaged";const s=t.indexOf("/");if(s<0)return"unmanaged";const n=t.indexOf("/",s+1);return n<0?"unmanaged":t.substring(n+1,e)}(s)),this.text=s||t[3]}}static getCpuType(t){const e=t[3].split(":")[0],s=N.get(e);return null!=s?s:"method"}}const $=new Map([["BULK_HEAP_ALLOCATE",class extends g{constructor(t){super(t),this.text=t[2]}}],["CALLOUT_REQUEST",class extends g{constructor(t){super(t),this.text=`${t[3]} : ${t[2]}`}}],["CALLOUT_RESPONSE",class extends g{constructor(t){super(t),this.text=`${t[3]} : ${t[2]}`}}],["NAMED_CREDENTIAL_REQUEST",class extends g{constructor(t){super(t),this.text=`${t[3]} : ${t[4]} : ${t[5]} : ${t[6]}`}}],["NAMED_CREDENTIAL_RESPONSE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["NAMED_CREDENTIAL_RESPONSE_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[3]} : ${t[4]} ${t[5]} : ${t[6]} ${t[7]}`}}],["CONSTRUCTOR_ENTRY",class extends x{constructor(t){super(t,["CONSTRUCTOR_EXIT"],null,"method","method"),this.hasValidSymbols=!0,this.suffix=" (constructor)",this.lineNumber=v(t[2]);const e=t[4];this.text=t[5]+e.substring(e.lastIndexOf("("))}}],["CONSTRUCTOR_EXIT",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2])}}],["EMAIL_QUEUE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2])}}],["METHOD_ENTRY",class extends x{constructor(t){super(t,["METHOD_EXIT"],null,"method","method"),this.hasValidSymbols=!0,this.lineNumber=v(t[2]),this.text=t[4]||this.type,"System.Type.forName(String, String)"===this.text&&(this.cpuType="loading")}}],["METHOD_EXIT",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2])}}],["SYSTEM_CONSTRUCTOR_ENTRY",class extends x{constructor(t){super(t,["SYSTEM_CONSTRUCTOR_EXIT"],"system","systemMethod","method"),this.suffix="(system constructor)",this.lineNumber=v(t[2]),this.text=t[3]}}],["SYSTEM_CONSTRUCTOR_EXIT",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2])}}],["SYSTEM_METHOD_ENTRY",class extends x{constructor(t){super(t,["SYSTEM_METHOD_EXIT"],"system","systemMethod","method"),this.lineNumber=v(t[2]),this.text=t[3]}}],["SYSTEM_METHOD_EXIT",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2])}}],["CODE_UNIT_STARTED",I],["CODE_UNIT_FINISHED",class extends g{constructor(t){super(t),this.isExit=!0,this.text=t[2]}}],["VF_APEX_CALL_START",class extends x{constructor(t){super(t,["VF_APEX_CALL_END"],null,"method","method"),this.suffix=" (VF APEX)",this.lineNumber=v(t[2]);const e=t[5]||t[3];let s=t[4]||"";if(!s&&e.toLowerCase().includes("pagemessagescomponentcontroller"))this.isValid=!1;else if(s){this.hasValidSymbols=!0;const t=s.indexOf("("),e=s.indexOf("<init>");s=t>-1?"."+s.substring(t).slice(1,-1)+"()":e>-1?s.substring(e+6)+"()":"."+s}else this.hasValidSymbols=!0;this.text=e+s}}],["VF_APEX_CALL_END",class extends g{constructor(t){super(t),this.isExit=!0,this.text=t[2]}}],["VF_DESERIALIZE_VIEWSTATE_BEGIN",class extends x{constructor(t){super(t,["VF_DESERIALIZE_VIEWSTATE_END"],null,"systemMethod","method"),this.text=this.type}}],["VF_DESERIALIZE_VIEWSTATE_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["VF_EVALUATE_FORMULA_BEGIN",class extends x{constructor(t){super(t,["VF_EVALUATE_FORMULA_END"],"formula","systemMethod","custom"),this.suffix=" (VF FORMULA)",this.text=t[3],this.group=this.type}}],["VF_EVALUATE_FORMULA_END",class extends g{constructor(t){super(t),this.isExit=!0,this.text=t[2]}}],["VF_SERIALIZE_VIEWSTATE_BEGIN",class extends x{constructor(t){super(t,["VF_SERIALIZE_VIEWSTATE_END"],null,"systemMethod","method"),this.namespace="system",this.text=this.type}}],["VF_SERIALIZE_VIEWSTATE_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["VF_PAGE_MESSAGE",class extends g{constructor(t){super(t),this.text=t[2]}}],["DML_BEGIN",class extends x{constructor(t){super(t,["DML_END"],null,"dml","free"),this.group="DML",this.lineNumber=v(t[2]),this.text="DML "+t[3]+" "+t[4],this.rowCount=A(t[5])}}],["DML_END",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2])}}],["IDEAS_QUERY_EXECUTE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2])}}],["SOQL_EXECUTE_BEGIN",class extends x{constructor(t){super(t,["SOQL_EXECUTE_END"],null,"soql","free"),this.group="SOQL",this.lineNumber=v(t[2]),this.text="SOQL: "+t[3]+" - "+t[4]}onEnd(t,e){this.rowCount=t.rowCount}}],["SOQL_EXECUTE_END",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2]),this.rowCount=A(t[3])}}],["SOQL_EXECUTE_EXPLAIN",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=`${t[3]}, line:${this.lineNumber}`}}],["SOSL_EXECUTE_BEGIN",class extends x{constructor(t){super(t,["SOSL_EXECUTE_END"],null,"soql","free"),this.group="SOQL",this.lineNumber=v(t[2]),this.text=`SOSL: ${t[3]}`}onEnd(t,e){this.rowCount=t.rowCount}}],["SOSL_EXECUTE_END",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2]),this.rowCount=A(t[3])}}],["HEAP_ALLOCATE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2])}}],["HEAP_DEALLOCATE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2])}}],["STATEMENT_EXECUTE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2])}}],["VARIABLE_SCOPE_BEGIN",class extends g{constructor(t){super(t),this.prefix="ASSIGN ",this.classes="node detail",this.lineNumber=v(t[2]),this.text=t[3],this.group=this.type,this.value=t[4]}onEnd(t,e){t.value&&(this.value=t.value),console.debug("NEVER HIT?")}}],["VARIABLE_SCOPE_END",class extends g{constructor(t){super(t)}}],["VARIABLE_ASSIGNMENT",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=t[3],this.group=this.type,this.value=t[4]}}],["USER_INFO",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=this.type+":"+t[3]+" "+t[4],this.group=this.type}}],["USER_DEBUG",class extends g{constructor(t){super(t),this.acceptsText=!0,this.lineNumber=v(t[2]),this.text=this.type+":"+t[3]+" "+t[4],this.group=this.type}}],["CUMULATIVE_LIMIT_USAGE",class extends x{constructor(t){super(t,["CUMULATIVE_LIMIT_USAGE_END"],null,"systemMethod","system"),this.text=this.type,this.group=this.type}}],["CUMULATIVE_LIMIT_USAGE_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["CUMULATIVE_PROFILING",class extends g{constructor(t){var e;super(t),this.acceptsText=!0,this.text=t[2]+" "+(null!==(e=t[3])&&void 0!==e?e:"")}}],["CUMULATIVE_PROFILING_BEGIN",class extends x{constructor(t){super(t,["CUMULATIVE_PROFILING_END"],null,"systemMethod","custom")}}],["CUMULATIVE_PROFILING_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["LIMIT_USAGE",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=t[3]+" "+t[4]+" out of "+t[5],this.group=this.type}}],["LIMIT_USAGE_FOR_NS",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[2],this.group=this.type}onAfter(t){const e=this.text.match(/Maximum CPU time: (\d+)/);!e||e[1]}}],["POP_TRACE_FLAGS",class extends g{constructor(t){super(t),this.namespace="system",this.lineNumber=v(t[2]),this.text=t[4]+", line:"+this.lineNumber+" - "+t[5]}}],["PUSH_TRACE_FLAGS",class extends g{constructor(t){super(t),this.namespace="system",this.lineNumber=v(t[2]),this.text=t[4]+", line:"+this.lineNumber+" - "+t[5]}}],["QUERY_MORE_BEGIN",class extends x{constructor(t){super(t,["QUERY_MORE_END"],null,"soql","custom"),this.lineNumber=v(t[2]),this.text=`line: ${this.lineNumber}`}}],["QUERY_MORE_END",class extends g{constructor(t){super(t),this.isExit=!0,this.lineNumber=v(t[2]),this.text=`line: ${this.lineNumber}`}}],["QUERY_MORE_ITERATIONS",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=`line: ${this.lineNumber}, iterations:${t[3]}`}}],["TOTAL_EMAIL_RECIPIENTS_QUEUED",class extends g{constructor(t){super(t),this.text=t[2]}}],["SAVEPOINT_ROLLBACK",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=`${t[3]}, line: ${this.lineNumber}`}}],["SAVEPOINT_SET",class extends g{constructor(t){super(t),this.lineNumber=v(t[2]),this.text=t[3]}}],["STACK_FRAME_VARIABLE_LIST",class extends g{constructor(t){super(t),this.acceptsText=!0}}],["STATIC_VARIABLE_LIST",class extends g{constructor(t){super(t),this.acceptsText=!0}}],["SYSTEM_MODE_ENTER",class extends g{constructor(t){super(t),this.text=t[2]}}],["SYSTEM_MODE_EXIT",class extends g{constructor(t){super(t),this.text=t[2]}}],["EXECUTION_STARTED",class extends x{constructor(t){super(t,["EXECUTION_FINISHED"],null,"method","method"),this.text=this.type}}],["EXECUTION_FINISHED",class extends g{constructor(t){super(t),this.isExit=!0,this.text=this.type}}],["ENTERING_MANAGED_PKG",class extends x{constructor(t){super(t,[],null,"method","pkg");const e=t[2],s=e.lastIndexOf("."),n=s<0?e:e.substring(s+1);this.text=this.namespace=n}onAfter(t){this.exitStamp=t.timestamp}}],["EVENT_SERVICE_PUB_BEGIN",class extends x{constructor(t){super(t,["EVENT_SERVICE_PUB_END"],null,"flow","custom"),this.group=this.type,this.text=t[2]}}],["EVENT_SERVICE_PUB_END",class extends g{constructor(t){super(t),this.isExit=!0,this.text=t[2]}}],["EVENT_SERVICE_PUB_DETAIL",class extends g{constructor(t){super(t),this.text=t[2]+" "+t[3]+" "+t[4],this.group=this.type}}],["EVENT_SERVICE_SUB_BEGIN",class extends x{constructor(t){super(t,["EVENT_SERVICE_SUB_END"],null,"flow","custom"),this.text=`${t[2]} ${t[3]}`,this.group=this.type}}],["EVENT_SERVICE_SUB_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} ${t[3]} ${t[4]} ${t[6]} ${t[6]}`,this.group=this.type}}],["EVENT_SERVICE_SUB_END",class extends g{constructor(t){super(t),this.isExit=!0,this.text=`${t[2]} ${t[3]}`}}],["FLOW_START_INTERVIEWS_BEGIN",class extends x{constructor(t){super(t,["FLOW_START_INTERVIEWS_END"],null,"flow","custom"),this.declarative=!0,this.text="FLOW_START_INTERVIEWS : "}onEnd(t,e){const s=this.getFlowType(e);this.group=s,this.suffix=` (${s})`,this.text+=this.getFlowName()}getFlowType(t){let e;for(let s=t.length-2;s>=0;s--){const n=t[s];if("CODE_UNIT_STARTED"===n.type){e="Flow"===n.group?"Flow":"Process Builder";break}if("FLOW_START_INTERVIEWS_BEGIN"===n.type){e="Flow";break}}return e||""}getFlowName(){if(this.children.length){return this.children[0].text}return""}}],["FLOW_START_INTERVIEWS_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["FLOW_START_INTERVIEWS_ERROR",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=`${t[2]} - ${t[4]}`}}],["FLOW_START_INTERVIEW_BEGIN",class extends g{constructor(t){super(t),this.text=t[3],this.group=this.type}}],["FLOW_START_INTERVIEW_END",class extends g{constructor(t){super(t)}}],["FLOW_START_INTERVIEW_LIMIT_USAGE",class extends g{constructor(t){super(t),this.text=t[2],this.group=this.type}}],["FLOW_START_SCHEDULED_RECORDS",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["FLOW_CREATE_INTERVIEW_BEGIN",class extends g{constructor(t){super(t),this.text=""}}],["FLOW_CREATE_INTERVIEW_END",class extends g{constructor(t){super(t)}}],["FLOW_CREATE_INTERVIEW_ERROR",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["FLOW_ELEMENT_BEGIN",class extends x{constructor(t){super(t,["FLOW_ELEMENT_END"],null,"flow","custom"),this.declarative=!0,this.group=this.type,this.text=this.type+" : "+t[3]+" "+t[4]}}],["FLOW_ELEMENT_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["FLOW_ELEMENT_DEFERRED",class extends g{constructor(t){super(t),this.declarative=!0,this.text=t[2]+" "+t[3],this.group=this.type}}],["FLOW_ELEMENT_ERROR",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[1]+t[2]+" "+t[3]+" "+t[4]}}],["FLOW_ELEMENT_FAULT",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["FLOW_ELEMENT_LIMIT_USAGE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["FLOW_INTERVIEW_FINISHED_LIMIT_USAGE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["FLOW_SUBFLOW_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["FLOW_VALUE_ASSIGNMENT",class extends g{constructor(t){super(t),this.declarative=!0,this.acceptsText=!0,this.text=t[3]+" "+t[4],this.group=this.type}}],["FLOW_WAIT_EVENT_RESUMING_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["FLOW_WAIT_EVENT_WAITING_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]} : ${t[6]}`}}],["FLOW_WAIT_RESUMING_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["FLOW_WAIT_WAITING_DETAIL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["FLOW_INTERVIEW_FINISHED",class extends g{constructor(t){super(t),this.text=t[3],this.group=this.type}}],["FLOW_INTERVIEW_PAUSED",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["FLOW_INTERVIEW_RESUMED",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["FLOW_ACTIONCALL_DETAIL",class extends g{constructor(t){super(t),this.text=t[3]+" : "+t[4]+" : "+t[5]+" : "+t[6],this.group=this.type}}],["FLOW_ASSIGNMENT_DETAIL",class extends g{constructor(t){super(t),this.text=t[3]+" : "+t[4]+" : "+t[5],this.group=this.type}}],["FLOW_LOOP_DETAIL",class extends g{constructor(t){super(t),this.text=t[3]+" : "+t[4],this.group=this.type}}],["FLOW_RULE_DETAIL",class extends g{constructor(t){super(t),this.text=t[3]+" : "+t[4],this.group=this.type}}],["FLOW_BULK_ELEMENT_BEGIN",class extends x{constructor(t){super(t,["FLOW_BULK_ELEMENT_END"],null,"flow","custom"),this.declarative=!0,this.text=`${this.type} : ${t[2]} - ${t[3]}`,this.group=this.type}}],["FLOW_BULK_ELEMENT_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["FLOW_BULK_ELEMENT_DETAIL",class extends g{constructor(t){super(t),this.declarative=!0,this.text=t[2]+" : "+t[3]+" : "+t[4],this.group=this.type}}],["FLOW_BULK_ELEMENT_LIMIT_USAGE",class extends g{constructor(t){super(t),this.declarative=!0,this.text=t[2],this.group=this.type}}],["FLOW_BULK_ELEMENT_NOT_SUPPORTED",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["PUSH_NOTIFICATION_INVALID_APP",class extends g{constructor(t){super(t),this.text=`${t[2]}.${t[3]}`}}],["PUSH_NOTIFICATION_INVALID_CERTIFICATE",class extends g{constructor(t){super(t),this.text=`${t[2]}.${t[3]}`}}],["PUSH_NOTIFICATION_INVALID_NOTIFICATION",class extends g{constructor(t){super(t),this.text=`${t[2]}.${t[3]} : ${t[4]} : ${t[5]} : ${t[6]} : ${t[7]} : ${t[8]}`}}],["PUSH_NOTIFICATION_NO_DEVICES",class extends g{constructor(t){super(t),this.text=`${t[2]}.${t[3]}`}}],["PUSH_NOTIFICATION_NOT_ENABLED",class extends g{constructor(t){super(t)}}],["PUSH_NOTIFICATION_SENT",class extends g{constructor(t){super(t),this.text=`${t[2]}.${t[3]} : ${t[4]} : ${t[5]} : ${t[6]} : ${t[7]}`}}],["SLA_END",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]} : ${t[6]}`}}],["SLA_EVAL_MILESTONE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["SLA_NULL_START_DATE",class extends g{constructor(t){super(t)}}],["SLA_PROCESS_CASE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["TESTING_LIMITS",class extends g{constructor(t){super(t),this.acceptsText=!0}}],["VALIDATION_ERROR",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[2]}}],["VALIDATION_FAIL",class extends g{constructor(t){super(t)}}],["VALIDATION_FORMULA",class extends g{constructor(t){super(t),this.acceptsText=!0;const e=t.length>3?" "+t[3]:"";this.text=t[2]+e,this.group=this.type}}],["VALIDATION_PASS",class extends g{constructor(t){super(t),this.text=t[3],this.group=this.type}}],["VALIDATION_RULE",class extends g{constructor(t){super(t),this.text=t[3],this.group=this.type}}],["WF_FLOW_ACTION_BEGIN",class extends g{constructor(t){super(t)}}],["WF_FLOW_ACTION_END",class extends g{constructor(t){super(t)}}],["WF_FLOW_ACTION_ERROR",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[1]+" "+t[4]}}],["WF_FLOW_ACTION_ERROR_DETAIL",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[1]+" "+t[2]}}],["WF_FIELD_UPDATE",class extends g{constructor(t){super(t),this.text=" "+t[2]+" "+t[3]+" "+t[4]+" "+t[5]+" "+t[6],this.group=this.type}}],["WF_RULE_EVAL_BEGIN",class extends x{constructor(t){super(t,["WF_RULE_EVAL_END"],null,"workflow","custom"),this.declarative=!0,this.text=this.type+" : "+t[2]}}],["WF_RULE_EVAL_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["WF_RULE_EVAL_VALUE",class extends g{constructor(t){super(t),this.text=t[2],this.group=this.type}}],["WF_RULE_FILTER",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[2],this.group=this.type}}],["WF_RULE_NOT_EVALUATED",class extends g{constructor(t){super(t),this.isExit=!0}}],["WF_CRITERIA_BEGIN",class extends x{constructor(t){super(t,["WF_CRITERIA_END","WF_RULE_NOT_EVALUATED"],null,"workflow","custom"),this.declarative=!0,this.group="WF_CRITERIA",this.text="WF_CRITERIA : "+t[5]+" : "+t[3]}}],["WF_CRITERIA_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["WF_FORMULA",class extends g{constructor(t){super(t),this.acceptsText=!0,this.text=t[2]+" : "+t[3],this.group=this.type}}],["WF_ACTION",class extends g{constructor(t){super(t),this.text=t[2],this.group=this.type}}],["WF_ACTIONS_END",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_ACTION_TASK",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]} : ${t[6]} : ${t[7]}`}}],["WF_APPROVAL",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_APPROVAL_REMOVE",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["WF_APPROVAL_SUBMIT",class extends g{constructor(t){super(t),this.text=`${t[2]}`}}],["WF_APPROVAL_SUBMITTER",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_ASSIGN",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["WF_EMAIL_ALERT",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_EMAIL_SENT",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_ENQUEUE_ACTIONS",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_ESCALATION_ACTION",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["WF_ESCALATION_RULE",class extends g{constructor(t){super(t)}}],["WF_EVAL_ENTRY_CRITERIA",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_FLOW_ACTION_DETAIL",class extends g{constructor(t){super(t);const e=t[4]?` : ${t[4]} :${t[5]}`:"";this.text=`${t[2]} : ${t[3]}`+e}}],["WF_HARD_REJECT",class extends g{constructor(t){super(t)}}],["WF_NEXT_APPROVER",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]}`}}],["WF_NO_PROCESS_FOUND",class extends g{constructor(t){super(t)}}],["WF_OUTBOUND_MSG",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["WF_PROCESS_FOUND",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["WF_REASSIGN_RECORD",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]}`}}],["WF_RESPONSE_NOTIFY",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["WF_RULE_ENTRY_ORDER",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_RULE_INVOCATION",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_SOFT_REJECT",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_SPOOL_ACTION_BEGIN",class extends g{constructor(t){super(t),this.text=t[2]}}],["WF_TIME_TRIGGER",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]}`}}],["WF_TIME_TRIGGERS_BEGIN",class extends g{constructor(t){super(t)}}],["EXCEPTION_THROWN",class extends g{constructor(t){super(t),this.discontinuity=!0;const e=t[3];e.indexOf("System.LimitException")>=0&&y(this.timestamp,e,"error"),this.lineNumber=v(t[2]),this.text=e,this.group=this.type}}],["FATAL_ERROR",class extends g{constructor(t){super(t),this.acceptsText=!0,this.hideable=!1,this.discontinuity=!0,y(this.timestamp,"FATAL ERROR! cause="+t[2],"error"),this.text=t[2]}}],["XDS_DETAIL",class extends g{constructor(t){super(t),this.text=t[2]}}],["XDS_RESPONSE",class extends g{constructor(t){super(t),this.text=`${t[2]} : ${t[3]} : ${t[4]} : ${t[5]} : ${t[6]}`}}],["XDS_RESPONSE_DETAIL",class extends g{constructor(t){super(t),this.text=t[2]}}],["XDS_RESPONSE_ERROR",class extends g{constructor(t){super(t),this.text=t[2]}}],["DUPLICATE_DETECTION_BEGIN",class extends x{constructor(t){super(t,["DUPLICATE_DETECTION_END"],null,"workflow","custom"),this.declarative=!0}}],["DUPLICATE_DETECTION_END",class extends g{constructor(t){super(t),this.isExit=!0}}],["DUPLICATE_DETECTION_RULE_INVOCATION",class extends g{constructor(t){super(t),this.text=`${t[3]} - ${t[4]}`}}]]);function S(t,e){const s=t.split("|"),n=s[1],o=$.get(n);if(o){const n=new o(s);return n.logLine=t,null==e||e.onAfter(n),n}return!i.test(n)&&(null==e?void 0:e.acceptsText)?e.text+=` | ${t}`:n?"DUMMY"!==n&&console.warn(`Unknown log line: ${n}`):e&&t.startsWith("*** Skipped")?y(e.timestamp,"Skipped-Lines","skip"):e&&t.indexOf("MAXIMUM DEBUG LOG SIZE REACHED")>=0?y(e.timestamp,"Max-Size-reached","skip"):c.test(t)||console.warn(`Bad log line: ${t}`),null}function L(t){var s;return e(this,void 0,void 0,(function*(){const e=(null===(s=t.match(/^.*EXECUTION_STARTED.*$/m))||void 0===s?void 0:s.index)||-1,n=t.substring(e).split(r);a=[],l=[],d=new Set,p=!1;let i=null;const o=n.length;for(let t=0;t<o;t++){const e=n[t];if(e){const t=S(e,i);t&&(a.push(t),i=t)}}return a}))}class C{constructor(t,e){this.key=t,this.level=e}}function b(t){const e=t.match(c);if(!e)return[];const s=e[0];return s.substring(s.indexOf(" ")+1).split(";").map((t=>{const e=t.split(",");return new C(e[0],e[1])}))}function O(){return R.instance()}class R{constructor(){this.vscodeAPIInstance=null;try{this.vscodeAPIInstance=acquireVsCodeApi()}catch(t){console.log("acquireVsCodeApi() exception: "+t)}}static instance(){return this._instance||(this._instance=new R),this._instance}openPath(t){this.vscodeAPIInstance?this.vscodeAPIInstance.postMessage({cmd:"openPath",path:t}):console.log(`VSCodeService.openPath(${t}) with no VSCode instance.`)}openType(t){this.vscodeAPIInstance?this.vscodeAPIInstance.postMessage({cmd:"openType",typeName:t.typeName,text:t.text}):console.log(`VSCodeService.openType(${t}) with no VSCode instance.`)}openHelp(){this.vscodeAPIInstance?this.vscodeAPIInstance.postMessage({cmd:"openHelp"}):console.log("VSCodeService.open() with no VSCode instance.")}getConfig(){this.vscodeAPIInstance?this.vscodeAPIInstance.postMessage({cmd:"getConfig"}):console.log("VSCodeService.getConfig() with no VSCode instance.")}}let w;R._instance=null;const D=document.createElement("div"),U=document.createElement("span"),M=document.createElement("a");function F(t){const e=t.target;if(e.classList.contains("toggle")){const t=e.parentElement,s=null==t?void 0:t.querySelector(".toggle");let n=null==t?void 0:t.querySelector(".childContainer");const i=null==t?void 0:t.dataset.enterstamp;if(!n&&i){const e=G(w,i);if(e instanceof _){n=e.children.length?B(e.children,[e.timestamp]):null,n&&t.appendChild(n)}tt()}if(s&&n)switch(s.textContent){case"+":n.classList.remove("hide"),s.textContent="-";break;case"-":n.classList.add("hide"),s.textContent="+"}}}function k(t){var e;const s=function(t){let e=document.querySelector(`div[data-enterstamp="${t}"]`);if(!e){let s,n;const i=P(w,t)||[],o=i.length;for(let t=0;t<o;t++){const e=i[t];if(e){const t=document.querySelector(`div[data-enterstamp="${e.timestamp}"]`);if(t){s=t,n=e;continue}break}}const r=i.map((t=>{if(null==t?void 0:t.timestamp)return t.timestamp}));if(n instanceof _&&n.children.length&&s){const i=B(n.children,r);s.appendChild(i),e=document.querySelector(`div[data-enterstamp="${t}"]`)}}return e}(t);if(tt(),s){const t=(null==s?void 0:s.querySelector("span.name"))||s;n("treeTab"),function(t){const e=[];let s=t.parentElement;for(;s&&"tree"!==s.id;)s.id&&e.push(s),s=s.parentElement;const n=[t],i=e.length;for(let t=0;t<i;t++){const s=e[t];n.push(s);const i=s.querySelector(":scope > .toggle"),o=s.querySelector(":scope > .childContainer");i&&(n.push(o),i.textContent="-")}n.forEach((t=>t.classList.remove("hide")))}(s),s.scrollIntoView(!1),t&&(null===(e=document.getSelection())||void 0===e||e.selectAllChildren(t))}}function P(t,e){if(t.timestamp===e)return[t];const s=t.children.length;for(let n=0;n<s;n++){const s=t.children[n];if(s instanceof _){const t=P(s,e);if(t)return t.unshift(s),t}}return null}function W(t){return t.hasValidSymbols}function V(t,e){const n=t.children,i=D.cloneNode();t.timestamp>=0&&(i.dataset.enterstamp=""+t.timestamp,i.id=`calltree-${t.timestamp}`),t.duration&&(i.dataset.totaltime=""+t.duration),i.className=t.classes||"";const o=n.length;if(o){const t=U.cloneNode();t.textContent="+",t.className="toggle",i.appendChild(t)}else i.classList.add("indent");const r=U.cloneNode();r.className="name";const c=function(t){const e=t.prefix||"",n=t.suffix||"";let i=[];t.containsDml&&i.push("D"+t.containsDml),t.containsSoql&&i.push("S"+t.containsSoql),t.containsThrown&&i.push("T"+t.containsThrown);let o="";i.length&&(o="("+i.join(",")+") ");const r=o+e,c=`${t.value?` = ${t.value}`:""}${n}${t.rowCount?` - Rows:${t.rowCount}`:""} - ${t.isTruncated?"TRUNCATED":`${s(t.duration||0)} (self ${s(t.selfTime||0)})`}${t.lineNumber?`, line: ${t.lineNumber}`:""}`,l=t.text;let a;if(!W(t))return[document.createTextNode(r+l+c)];a=M.cloneNode(),a.href="#",a.textContent=l;const d=[document.createTextNode(r),a];return c&&d.push(document.createTextNode(c)),d}(t),l=c.length;for(let t=0;t<l;t++)r.appendChild(c[t]);if(i.appendChild(r),o&&(e.includes(t.timestamp)||e.includes(-1))){const t=B(n,e);t&&i.appendChild(t)}return i}function B(t,e){const s=D.cloneNode();return s.className="childContainer hide",t.forEach((t=>{t instanceof x?s.appendChild(V(t,e)):s.appendChild(function(t){const e=D.cloneNode();e.className=t instanceof g&&t.hideable?"block name detail":"block name";const s=t.text||"";let n=t.type+(s&&s!==t.type?" - "+s:"");return n=n.replace(/ \| /g,"\n"),n.endsWith("\\")&&(n=n.slice(0,-1)),e.textContent=n,e}(t))})),s}function H(t){var e;const s=t.target,n=s.matches("a")?null===(e=s.parentElement)||void 0===e?void 0:e.parentElement:null,i=null==n?void 0:n.dataset.enterstamp;if(i){const t=G(w,i);if(t){const e=function(t){if(!W(t))return null;const e=t.text,s=t.lineNumber?"-"+t.lineNumber:"",n=e.indexOf("("),i=n>-1?e.substring(0,n):e;let o;if("METHOD_ENTRY"===t.type){const t=i.lastIndexOf(".");o=e.substring(0,t)+s}else o=i+s;return{typeName:o,text:e}}(t);e&&O().openType(e)}}}function G(t,e){return X(t,parseInt(e))}function X(t,e){if(t){if(t.timestamp===e)return t;if(t.exitStamp&&!(e>=t.timestamp&&e<=t.exitStamp))return null;const s=t.children.length;for(let n=0;n<s;++n){const s=t.children[n];if(s instanceof _){const t=X(s,e);if(t)return t}}}return null}function z(t){return e(this,void 0,void 0,(function*(){w=t,function(){const t=document.getElementById("tree");if(t){t.addEventListener("click",F),t.addEventListener("click",H);const e=V(w,[0]);if(t.innerHTML="",e){t.appendChild(e);const s=D.cloneNode();s.style.height="78vh",t.appendChild(s),tt()}}}()}))}function q(t){const e=t.querySelector(":scope > .toggle"),s=t.querySelector(":scope > .childContainer");if(e&&!s&&t.dataset.enterstamp){const e=G(w,t.dataset.enterstamp||"");if(e instanceof _&&e.children.length){const s=B(e.children,[-1]);t.appendChild(s)}}else if(t.children){const e=t.children.length;for(let s=0;s<e;++s)q(t.children[s])}}let Y=!1;function Q(t){const e=document.getElementById("tree");Y||(q(e),Y=!0),e&&(tt(),e.querySelectorAll(".toggle").forEach((t=>{t.textContent="-"})),document.querySelectorAll(".childContainer").forEach((t=>{t.classList.contains("block")||t.classList.remove("hide")})))}function K(t){const e=document.getElementById("tree");var s;e&&(s=e,document.querySelectorAll(".toggle").forEach((t=>{t.textContent="+"})),s.querySelectorAll(".childContainer").forEach((t=>{t.classList.contains("block")||t.classList.add("hide")})))}function Z(t,e){const s=function(t){const e=document.styleSheets.length;for(let s=0;s<e;++s){const e=document.styleSheets[s].cssRules,n=e.length;for(let s=0;s<n;++s){const n=e[s];if(n.selectorText===t)return n}}return null}(t);s&&(s.style.display=e?"none":"block")}function j(t){t.classList.add("hide")}function J(t){t.classList.remove("hide")}function tt(){const t=document.getElementById("hideDetails"),e=document.getElementById("hideSystem"),s=document.getElementById("hideFormula"),n=Array.from(document.querySelectorAll("#tree .node[data-totaltime]"));n.forEach(J),function(t){const e=document.getElementById("hideUnder");if(null==e?void 0:e.checked){const e=1e6*+document.getElementById("hideUnderTime").value;if(e){t.filter((t=>Number(t.dataset.totaltime)<e)).forEach(j)}}}(n),Z(".detail",null==t?void 0:t.checked),Z(".node.system",null==e?void 0:e.checked),Z(".node.formula",null==s?void 0:s.checked)}window.addEventListener("DOMContentLoaded",(function(t){const e=document.getElementById("expandAll"),s=document.getElementById("collapseAll"),n=document.getElementById("hideDetails"),i=document.getElementById("hideSystem"),o=document.getElementById("hideFormula"),r=document.getElementById("hideUnder"),c=document.getElementById("hideUnderTime");null==e||e.addEventListener("click",Q),null==s||s.addEventListener("click",K),null==n||n.addEventListener("change",tt),null==i||i.addEventListener("change",tt),null==o||o.addEventListener("change",tt),null==r||r.addEventListener("change",tt),null==c||c.addEventListener("input",tt)}));const et=new Map([["codeUnit",{label:"Code Unit",fillColor:"#6BAD68"}],["soql",{label:"SOQL",fillColor:"#4B9D6E"}],["method",{label:"Method",fillColor:"#328C72"}],["flow",{label:"Flow",fillColor:"#237A72"}],["dml",{label:"DML",fillColor:"#22686D"}],["workflow",{label:"Workflow",fillColor:"#285663"}],["systemMethod",{label:"System Method",fillColor:"#2D4455"}]]);const st=new class{constructor(){this.isRedrawQueued=!0,this.defaultZoom=0,this._zoom=0,this._offsetY=0,this._offsetX=0}set zoom(t){this._zoom=t,this.queueRedraw()}get zoom(){return this._zoom}set offsetY(t){this._offsetY!==t&&(this._offsetY=t,this.queueRedraw())}get offsetY(){return this._offsetY}set offsetX(t){this._offsetX!==t&&(this._offsetX=t,this.queueRedraw())}get offsetX(){return this._offsetX}queueRedraw(){this.isRedrawQueued||(this.isRedrawQueued=!0,requestAnimationFrame(At))}};let nt,it,ot,rt,ct,lt,at,dt,ut,ht,pt,Et=0;function mt(t,e=0){if(!t.children.length)return e;const s=t.duration?e+1:e;let n=e;for(let e=t.children.length-1;e>=0;--e){const i=t.children[e];if(i instanceof x){const t=mt(i,s);t>n&&(n=t)}}return n}function ft(t,e){const s=[],n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.timelineKey;o&&n.duration&&(et.get(o),xt(n,e)),n.children.forEach((t=>{t instanceof x&&s.push(t)}))}s.length&&ft(s,e+1)}const _t=new Map;function xt(t,e){const{timelineKey:s,timestamp:n,duration:i}=t,o={x:n,y:e,w:i};let r=_t.get(s);r||_t.set(s,r=[]),r.push(o)}const Tt=t=>{const e=t.w*st.zoom;if(e>=.05){const s=t.x*st.zoom-st.offsetX,n=-15*t.y-st.offsetY;s<dt&&s+e>0&&n>-at&&n+-15<0&&rt.rect(s,n,e,-15)}};function gt(){lt=mt(ut),yt(),Et=15*lt,st.offsetX=0,st.offsetY=0}function yt(){if(!it)return;const{clientWidth:t,clientHeight:e}=it;if(t&&e&&(t!==dt||e!==at)){ot.width=dt=t,ot.height=at=e,rt.setTransform(1,0,0,1,0,at);const s=t/h;st.defaultZoom||(st.defaultZoom=st.zoom||(st.zoom=s));const n=st.zoom-(st.defaultZoom-s);st.zoom=Math.min(n,.3),st.defaultZoom=s}ct=st.zoom>4e-7?"normal 16px serif":"normal 8px serif"}function vt(t){return e(this,void 0,void 0,(function*(){Nt(),it=document.getElementById("timelineWrapper"),ot=document.getElementById("timeline"),rt=ot.getContext("2d"),ut=t,gt(),ft([ut],-1),rt&&requestAnimationFrame(At)}))}function At(){rt&&(yt(),rt.clearRect(0,-at,dt,at),function(t){var e,s;const n=l.length;if(!n)return;let i=0;for(;i<n;){const n=l[i++],o=null!==(e=l[i])&&void 0!==e?e:{},r=n.timestamp,c=null!==(s=o.timestamp)&&void 0!==s?s:h;t.fillStyle=n.color;const a=r*st.zoom-st.offsetX,d=(c-r)*st.zoom;t.fillRect(a,-at,d,at)}}(rt),function(t){t.lineWidth=1,t.font=ct,t.textBaseline="top",t.textAlign="left";const e=2-at,s=1e9*st.zoom,n=st.offsetX/st.zoom,i=n+dt/st.zoom,o=Math.ceil(i/1e9),r=Math.floor(n/1e9);t.strokeStyle="#F88962",t.fillStyle="#F88962",t.beginPath();for(let n=r;n<=o;n++){const i=s*n-st.offsetX;t.moveTo(i,-at),t.lineTo(i,0),t.fillText(`${n.toFixed(1)}s`,i+2,e)}t.stroke();const c=150/(1e3*st.zoom),l=[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,1e6].reduce((function(t,e){return Math.abs(e-c)<Math.abs(t-c)?e:t}));t.strokeStyle="#E0E0E0",t.fillStyle="#808080",t.beginPath();const a=1e3*st.zoom,d=i/1e3,u=n/1e3;let h=1e6*Math.floor(u/1e6);for(;h<d;)if(h+=l,h%1e6!=0&&h>=u){const s=a*h-st.offsetX;t.moveTo(s,-at),t.lineTo(s,0),t.fillText(h/1e3+" ms",s+2,e)}t.stroke()}(rt),rt.strokeStyle="#B0B0B0",rt.lineWidth=1,function(t){t.lineWidth=1;for(let[e,s]of _t){const n=et.get(e);t.beginPath(),t.fillStyle=n.fillColor,s.forEach(Tt),t.fill(),t.stroke()}}(rt)),st.isRedrawQueued=!1}function Nt(){const t=document.getElementById("timelineKey"),e=document.createElement("span");e.innerText="",t&&(t.innerHTML="",t.appendChild(e));for(const[e,s]of et){const e=document.createElement("div"),n=document.createElement("span");n.innerText=s.label,e.className="keyEntry",e.style.backgroundColor=s.fillColor,e.style.color="#FFFFFF",e.appendChild(n),t.appendChild(e)}}function It(t,e,s,n){if(!t)return null;if(t.duration){const i=t.timestamp*st.zoom-st.offsetX,o=t.duration*st.zoom,r=i+o;if(o<.05||i>s||r<s)return null;if(e===n)return t}if(t.children.length){const i=t.duration?e+1:e;if(n>=i){const e=t.children.length;for(let o=0;o<e;++o){const e=t.children[o];if(e instanceof _){const t=It(e,i,s,n);if(t)return t}}}}return null}function $t(t,e){if(!bt&&it&&nt){let n=function(t,e){const n=It(ut,0,t,e);if(n){const t=document.createElement("div"),e=document.createElement("br");let i=n.text;return n.suffix&&(i+=n.suffix),t.appendChild(document.createTextNode(n.type)),t.appendChild(e.cloneNode()),t.appendChild(document.createTextNode(i)),n.timestamp&&n.duration&&n.selfTime&&(t.appendChild(e.cloneNode()),t.appendChild(document.createTextNode("timestamp: "+n.timestamp)),n.exitStamp&&(t.appendChild(document.createTextNode(" => "+n.exitStamp)),t.appendChild(e.cloneNode()),t.appendChild(document.createTextNode(`duration: ${s(n.duration)}`)),"free"===n.cpuType?t.appendChild(document.createTextNode(" (free)")):t.appendChild(document.createTextNode(` (self ${s(n.selfTime)})`)))),t}return null}(t,~~((at-e-st.offsetY)/Et*lt))||function(t){var e,s;const n=null==l?void 0:l.length;let i=0;for(;i<n;){const n=l[i++],o=null!==(e=l[i])&&void 0!==e?e:{},r=n.timestamp,c=null!==(s=o.timestamp)&&void 0!==s?s:h,a=r*st.zoom-st.offsetX,d=c*st.zoom-st.offsetX;if(t>=a&&t<=d){const t=document.createElement("div");return t.textContent=n.reason,t}}return null}(t);!function(t,e,s,n,i){if(s&&n&&i){let o=t+10,r=e+2;n.innerHTML="",n.appendChild(s),n.style.cssText=`left:${o}px; top:${r}px; display: block;`;const c=n.offsetWidth-i.offsetWidth+o;c>0&&(o-=c-4);const l=n.offsetHeight-i.offsetHeight+r;l>0&&(r-=n.offsetHeight+4),(c>0||l>0)&&(n.style.cssText=`left:${o}px; top:${r}px; display: block;`)}else n.style.display="none"}(t,e,n,nt,it)}}function St(t){const e=t.target;if(e&&("timeline"===e.id||"tooltip"===e.id)){const e=null==ot?void 0:ot.getBoundingClientRect();e&&(ht=t.clientX-e.left,pt=t.clientY-e.top,$t(ht,pt))}}function Lt(t){if(!bt&&"block"===nt.style.display){const t=~~((at-pt-st.offsetY)/Et*lt),e=It(ut,0,ht,t);e&&e.timestamp&&k(e.timestamp)}}function Ct(t){bt=!1,t.relatedTarget&&"tooltip"===t.relatedTarget.id||(nt.style.display="none")}let bt=!1;function Ot(t){bt=!0}function Rt(t){bt=!1}function wt(t){if(bt){nt.style.display="none";const{movementY:e,movementX:s}=t,n=st.zoom*h-dt;st.offsetX=Math.max(0,Math.min(n,st.offsetX-s));const i=~~(Et-at+at/4);st.offsetY=Math.min(0,Math.max(-i,st.offsetY-e))}}function Dt(t){if(!bt){nt.style.display="none",t.stopPropagation();const{deltaY:e,deltaX:s}=t,n=st.zoom;let i=e/1e3*st.zoom;const o=st.zoom-i;if(i=o>=st.defaultZoom?i:st.zoom-st.defaultZoom,i=o<=.3?i:st.zoom-.3,0!==i){if(st.zoom=st.zoom-i,st.zoom!==n){const t=(ht+st.offsetX)/n*st.zoom-ht,e=st.zoom*h-dt;st.offsetX=Math.max(0,Math.min(e,t))}}else{const t=st.zoom*h-dt;st.offsetX=Math.max(0,Math.min(t,st.offsetX+s))}}}window.addEventListener("DOMContentLoaded",(function(t){const e=document.getElementById("timeline"),s=document.getElementById("timelineWrapper");nt=document.getElementById("tooltip"),e&&(e.addEventListener("mouseout",Ct),e.addEventListener("wheel",Dt,{passive:!0}),e.addEventListener("mousedown",Ot),e.addEventListener("mouseup",Rt),e.addEventListener("mousemove",wt,{passive:!0}),e.addEventListener("click",Lt)),s&&new ResizeObserver(yt).observe(s),document.addEventListener("mousemove",St)}));const Ut=new Map([["count",["count","duration","name"]],["duration",["duration","count","name"]],["selfTime",["selfTime","count","name"]],["name",["name","count","duration"]]]),Mt=document.createElement("div"),Ft=document.createElement("span"),kt=document.createElement("b");let Pt;class Wt{constructor(t,e,s,n){this.name=t,this.count=e,this.duration=s,this.selfTime=n}}function Vt(t,e,s){const n=e.children;if(s){let n=t.get(s);n?(++n.count,e.duration&&(n.duration+=e.duration,n.selfTime+=e.selfTime||0)):t.set(s,new Wt(s,1,e.duration||0,e.selfTime||0))}n.forEach((function(e){e instanceof _&&Vt(t,e,e.group||e.text)}))}function Bt(t){const e=new Map;return Vt(e,t),Pt=[...e.values()],Pt}function Ht(t,e,s,n){let i,o,r;switch(t){case"count":o=s.count,r=n.count;break;case"duration":o=s.duration,r=n.duration;break;case"selfTime":o=s.selfTime,r=n.selfTime;break;default:o=s.name,r=n.name}return i=o===r?0:void 0===o?1:void 0===r||o<r?-1:1,e?i:-i}function Gt(t,e,s,n,i=!1){const o=Xt(t,i);o.className="name",o.title=t;const r=Xt(e,i);r.className="count";const c=Xt(s,i);c.className="duration";const l=Xt(n,i);l.className="selfTime";const a=Mt.cloneNode();return a.className=i?"row":"row data",a.appendChild(o),a.appendChild(r),a.appendChild(c),a.appendChild(l),a}function Xt(t,e){const s=e?kt.cloneNode():Ft.cloneNode();return s.textContent=t,s}function zt(){return e(this,void 0,void 0,(function*(){const t=document.getElementById("sortField").value,e=document.getElementById("sortAscending"),n=null==e?void 0:e.checked,i=document.getElementById("analysisHeader"),o=document.getElementById("analysis"),r=document.getElementById("analysisFooter");if(Pt.sort((function(e,s){return function(t,e,s,n){const i=Ut.get(t),o=i.length;for(let t=0;t<o;++t){const o=Ht(i[t],e,s,n);if(0!==o)return o}return 0}(t,n,e,s)})),i&&r&&o){i.innerHTML="",i.appendChild(Gt("Method Name","Count","Total Time","Self Time",!0)),o.innerHTML="";let t=0,e=0;Pt.forEach((function(n){var i=n.duration?s(n.duration):"-",r=n.selfTime?s(n.selfTime):"-";o.appendChild(Gt(n.name,""+n.count,i,r)),t+=n.count,e+=n.selfTime})),h&&(r.innerHTML="",r.appendChild(Gt("Total",""+t,s(h),s(e),!0)))}}))}function qt(t){zt()}window.addEventListener("DOMContentLoaded",(function(t){const e=document.getElementById("sortField"),s=document.getElementById("sortAscending");null==e||e.addEventListener("change",qt),null==s||s.addEventListener("change",qt)}));
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Yt=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Qt=Symbol(),Kt=new Map;class Zt{constructor(t,e){if(this._$cssResult$=!0,e!==Qt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=Kt.get(this.cssText);return Yt&&void 0===t&&(Kt.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const jt=(t,...e)=>{const s=1===t.length?t[0]:e.reduce(((e,s,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[n+1]),t[0]);return new Zt(s,Qt)},Jt=Yt?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return(t=>new Zt("string"==typeof t?t:t+"",Qt))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var te;const ee=window.trustedTypes,se=ee?ee.emptyScript:"",ne=window.reactiveElementPolyfillSupport,ie={toAttribute(t,e){switch(e){case Boolean:t=t?se:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let s=t;switch(e){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},oe=(t,e)=>e!==t&&(e==e||t==t),re={attribute:!0,type:String,converter:ie,reflect:!1,hasChanged:oe};class ce extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,s)=>{const n=this._$Eh(s,e);void 0!==n&&(this._$Eu.set(n,s),t.push(n))})),t}static createProperty(t,e=re){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const s="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,s,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,s){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdate(t,i,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||re}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of e)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const s=new Set(t.flat(1/0).reverse());for(const t of s)e.unshift(Jt(t))}else void 0!==t&&e.push(Jt(t));return e}static _$Eh(t,e){const s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,s;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{Yt?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const s=document.createElement("style"),n=window.litNonce;void 0!==n&&s.setAttribute("nonce",n),s.textContent=e.cssText,t.appendChild(s)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,s){this._$AK(t,s)}_$ES(t,e,s=re){var n,i;const o=this.constructor._$Eh(t,s);if(void 0!==o&&!0===s.reflect){const r=(null!==(i=null===(n=s.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==i?i:ie.toAttribute)(e,s.type);this._$Ei=t,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$Ei=null}}_$AK(t,e){var s,n,i;const o=this.constructor,r=o._$Eu.get(t);if(void 0!==r&&this._$Ei!==r){const t=o.getPropertyOptions(r),c=t.converter,l=null!==(i=null!==(n=null===(s=c)||void 0===s?void 0:s.fromAttribute)&&void 0!==n?n:"function"==typeof c?c:null)&&void 0!==i?i:ie.fromAttribute;this._$Ei=r,this[r]=l(e,t.type),this._$Ei=null}}requestUpdate(t,e,s){let n=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||oe)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(t,s))):n=!1),!this.isUpdatePending&&n&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const s=this._$AL;try{e=this.shouldUpdate(s),e?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(s)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(s)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$E_&&(this._$E_.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$E_=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var le;ce.finalized=!0,ce.elementProperties=new Map,ce.elementStyles=[],ce.shadowRootOptions={mode:"open"},null==ne||ne({ReactiveElement:ce}),(null!==(te=globalThis.reactiveElementVersions)&&void 0!==te?te:globalThis.reactiveElementVersions=[]).push("1.0.2");const ae=globalThis.trustedTypes,de=ae?ae.createPolicy("lit-html",{createHTML:t=>t}):void 0,ue=`lit$${(Math.random()+"").slice(9)}$`,he="?"+ue,pe=`<${he}>`,Ee=document,me=(t="")=>Ee.createComment(t),fe=t=>null===t||"object"!=typeof t&&"function"!=typeof t,_e=Array.isArray,xe=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Te=/-->/g,ge=/>/g,ye=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,ve=/'/g,Ae=/"/g,Ne=/^(?:script|style|textarea)$/i,Ie=(t=>(e,...s)=>({_$litType$:t,strings:e,values:s}))(1),$e=Symbol.for("lit-noChange"),Se=Symbol.for("lit-nothing"),Le=new WeakMap,Ce=(t,e,s)=>{var n,i;const o=null!==(n=null==s?void 0:s.renderBefore)&&void 0!==n?n:e;let r=o._$litPart$;if(void 0===r){const t=null!==(i=null==s?void 0:s.renderBefore)&&void 0!==i?i:null;o._$litPart$=r=new Ue(e.insertBefore(me(),t),t,void 0,null!=s?s:{})}return r._$AI(t),r},be=Ee.createTreeWalker(Ee,129,null,!1),Oe=(t,e)=>{const s=t.length-1,n=[];let i,o=2===e?"<svg>":"",r=xe;for(let e=0;e<s;e++){const s=t[e];let c,l,a=-1,d=0;for(;d<s.length&&(r.lastIndex=d,l=r.exec(s),null!==l);)d=r.lastIndex,r===xe?"!--"===l[1]?r=Te:void 0!==l[1]?r=ge:void 0!==l[2]?(Ne.test(l[2])&&(i=RegExp("</"+l[2],"g")),r=ye):void 0!==l[3]&&(r=ye):r===ye?">"===l[0]?(r=null!=i?i:xe,a=-1):void 0===l[1]?a=-2:(a=r.lastIndex-l[2].length,c=l[1],r=void 0===l[3]?ye:'"'===l[3]?Ae:ve):r===Ae||r===ve?r=ye:r===Te||r===ge?r=xe:(r=ye,i=void 0);const u=r===ye&&t[e+1].startsWith("/>")?" ":"";o+=r===xe?s+pe:a>=0?(n.push(c),s.slice(0,a)+"$lit$"+s.slice(a)+ue+u):s+ue+(-2===a?(n.push(void 0),e):u)}const c=o+(t[s]||"<?>")+(2===e?"</svg>":"");return[void 0!==de?de.createHTML(c):c,n]};class Re{constructor({strings:t,_$litType$:e},s){let n;this.parts=[];let i=0,o=0;const r=t.length-1,c=this.parts,[l,a]=Oe(t,e);if(this.el=Re.createElement(l,s),be.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=be.nextNode())&&c.length<r;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(ue)){const s=a[o++];if(t.push(e),void 0!==s){const t=n.getAttribute(s.toLowerCase()+"$lit$").split(ue),e=/([.?@])?(.*)/.exec(s);c.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?Fe:"?"===e[1]?Pe:"@"===e[1]?We:Me})}else c.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(Ne.test(n.tagName)){const t=n.textContent.split(ue),e=t.length-1;if(e>0){n.textContent=ae?ae.emptyScript:"";for(let s=0;s<e;s++)n.append(t[s],me()),be.nextNode(),c.push({type:2,index:++i});n.append(t[e],me())}}}else if(8===n.nodeType)if(n.data===he)c.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(ue,t+1));)c.push({type:7,index:i}),t+=ue.length-1}i++}}static createElement(t,e){const s=Ee.createElement("template");return s.innerHTML=t,s}}function we(t,e,s=t,n){var i,o,r,c;if(e===$e)return e;let l=void 0!==n?null===(i=s._$Cl)||void 0===i?void 0:i[n]:s._$Cu;const a=fe(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==a&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===a?l=void 0:(l=new a(t),l._$AT(t,s,n)),void 0!==n?(null!==(r=(c=s)._$Cl)&&void 0!==r?r:c._$Cl=[])[n]=l:s._$Cu=l),void 0!==l&&(e=we(t,l._$AS(t,e.values),l,n)),e}class De{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:s},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:Ee).importNode(s,!0);be.currentNode=i;let o=be.nextNode(),r=0,c=0,l=n[0];for(;void 0!==l;){if(r===l.index){let e;2===l.type?e=new Ue(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new Ve(o,this,t)),this.v.push(e),l=n[++c]}r!==(null==l?void 0:l.index)&&(o=be.nextNode(),r++)}return i}m(t){let e=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}}class Ue{constructor(t,e,s,n){var i;this.type=2,this._$AH=Se,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=n,this._$Cg=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=we(this,t,e),fe(t)?t===Se||null==t||""===t?(this._$AH!==Se&&this._$AR(),this._$AH=Se):t!==this._$AH&&t!==$e&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var e;return _e(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==Se&&fe(this._$AH)?this._$AA.nextSibling.data=t:this.S(Ee.createTextNode(t)),this._$AH=t}T(t){var e;const{values:s,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=Re.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.m(s);else{const t=new De(i,this),e=t.p(this.options);t.m(s),this.S(e),this._$AH=t}}_$AC(t){let e=Le.get(t.strings);return void 0===e&&Le.set(t.strings,e=new Re(t)),e}M(t){_e(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let s,n=0;for(const i of t)n===e.length?e.push(s=new Ue(this.A(me()),this.A(me()),this,this.options)):s=e[n],s._$AI(i),n++;n<e.length&&(this._$AR(s&&s._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Me{constructor(t,e,s,n,i){this.type=1,this._$AH=Se,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Se}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,s,n){const i=this.strings;let o=!1;if(void 0===i)t=we(this,t,e,0),o=!fe(t)||t!==this._$AH&&t!==$e,o&&(this._$AH=t);else{const n=t;let r,c;for(t=i[0],r=0;r<i.length-1;r++)c=we(this,n[s+r],e,r),c===$e&&(c=this._$AH[r]),o||(o=!fe(c)||c!==this._$AH[r]),c===Se?t=Se:t!==Se&&(t+=(null!=c?c:"")+i[r+1]),this._$AH[r]=c}o&&!n&&this.k(t)}k(t){t===Se?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Fe extends Me{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===Se?void 0:t}}const ke=ae?ae.emptyScript:"";class Pe extends Me{constructor(){super(...arguments),this.type=4}k(t){t&&t!==Se?this.element.setAttribute(this.name,ke):this.element.removeAttribute(this.name)}}class We extends Me{constructor(t,e,s,n,i){super(t,e,s,n,i),this.type=5}_$AI(t,e=this){var s;if((t=null!==(s=we(this,t,e,0))&&void 0!==s?s:Se)===$e)return;const n=this._$AH,i=t===Se&&n!==Se||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==Se&&(n===Se||i);i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class Ve{constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){we(this,t)}}const Be=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var He,Ge;null==Be||Be(Re,Ue),(null!==(le=globalThis.litHtmlVersions)&&void 0!==le?le:globalThis.litHtmlVersions=[]).push("2.0.2");class Xe extends ce{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const s=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=s.firstChild),s}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=Ce(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return $e}}Xe.finalized=!0,Xe._$litElement$=!0,null===(He=globalThis.litElementHydrateSupport)||void 0===He||He.call(globalThis,{LitElement:Xe});const ze=globalThis.litElementPolyfillSupport;null==ze||ze({LitElement:Xe}),(null!==(Ge=globalThis.litElementVersions)&&void 0!==Ge?Ge:globalThis.litElementVersions=[]).push("3.0.2");class qe{constructor(t,e,s){this.count=t,this.rowCount=e,this.stacks=s}expand(t,e,s){return new qe(this.count+t,this.rowCount+e,this.stacks.concat([s]))}}class Ye{constructor(){this.dmlMap=new Map,this.soqlMap=new Map,this.stacks=[]}static create(t){return e(this,void 0,void 0,(function*(){const e=new Ye;return Ye.findDatabaseLines(e,t,[]),this._instance=e,this._instance}))}static instance(){return Ye._instance}static findDatabaseLines(t,e,s){const n=e.children,i=n.length;for(let e=0;e<i;++e){const i=n[e];switch(i.type){case"DML_BEGIN":t.upsert(t.dmlMap,i,s);break;case"SOQL_EXECUTE_BEGIN":t.upsert(t.soqlMap,i,s)}i instanceof x&&(s.push(i),Ye.findDatabaseLines(t,i,s),s.pop())}}upsert(t,e,s){let n=this.internStack(s),i=t.get(e.text);i?t.set(e.text,i.expand(1,e.rowCount||0,n)):t.set(e.text,new qe(1,e.rowCount||0,[n]))}internStack(t){return this.stacks.push([...t].reverse()),this.stacks.length-1}}function Qe(){return e(this,void 0,void 0,(function*(){const t=document.getElementById("dbContent");if(t){const e=[Ie`<database-section type="dml" />`,Ie`<database-section type="soql" />`];Ce(Ie`<div>${e}</div>`,t)}}))}function Ke(t,e){let s=e.split(".");return t.has(s[0])?s[0]:null}function Ze(t){return e(this,void 0,void 0,(function*(){const e=function(t){const e=t.children;let s=new Set,n=0;for(;n<window.activeNamespaces.length;)s.add(window.activeNamespaces[n]),++n;for(n=0;n<e.length;){const t=e[n];"ENTERING_MANAGED_PKG"===t.type&&s.add(t.text),++n}return s}(t),s=t.children;let n=0;for(;n<s.length;){const t=s[n],i=t.type;"CODE_UNIT_STARTED"!==i||"method"!==t.type||t.namespace?("EXCEPTION_THROWN"===i||"CONSTRUCTOR_ENTRY"===i||"METHOD_ENTRY"===i)&&(t.namespace=Ke(e,t.text)):t.namespace=Ke(e,t.text),++n}return e}))}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Ye._instance=null;const je=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:s,elements:n}=e;return{kind:s,elements:n,finisher(e){window.customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Je=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(s){s.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(s){s.createProperty(e.key,t)}};function ts(t){return(e,s)=>void 0!==s?((t,e,s)=>{e.constructor.createProperty(s,t)})(t,e,s):Je(t,e)}let es=class extends Xe{constructor(){super(...arguments),this.type=""}static get styles(){return jt`
      .dbSection {
        padding: 10px;
      }
      .dbTitle {
        font-weight: bold;
        font-size: 10pt;
      }
      .dbBlock {
        margin-left: 10px;
        font-weight: normal;
      }
    `}render(){const t=Ye.instance();let e=null,s="";if("soql"===this.type&&t&&(e=t.soqlMap,s="SOQL Statements"),"dml"===this.type&&t&&(e=t.dmlMap,s="DML Statements"),e){const t=this.getKeyList(e);let n=0,i=0;e.forEach((t=>{n+=t.count,i+=t.rowCount}));const o=t.map((t=>Ie`<database-row key=${t} />`));return Ie`
        <div class="dbSection">
          <div class="dbTitle">
            ${s} (Count: ${n}, Rows: ${i})
            <div class="dbBlock">
                ${o}
            </div>
          </div>
        </div>
      `}return Ie`<p>No map found for type ${this.type}</p>`}getKeyList(t){const e=Array.from(t.keys());return e.sort(((e,s)=>{let n=t.get(e),i=t.get(s);if(n&&i){const t=i.count-n.count;if(0!==t)return t;const e=i.rowCount-n.rowCount;if(0!==e)return e}return e.localeCompare(s)})),e}};t([ts({type:String})],es.prototype,"type",void 0),es=t([je("database-section")],es);let ss=class extends Xe{constructor(){super(...arguments),this.key=""}static get styles(){return jt`
      .dbEntry {
        display: flex;
      }
      .dbCount {
        display: inline-block;
        width: 75px;
        min-width: 75px;
      }
      .dbRows {
        display: inline-block;
        width: 90px;
        min-width: 90px;
      }
      .stackEntry {
        display: flex;
        margin-left: 180px;
      }
    `}render(){var t,e;const s=null===(t=Ye.instance())||void 0===t?void 0:t.soqlMap,n=null===(e=Ye.instance())||void 0===e?void 0:e.dmlMap;if(s&&n){let t=s.get(this.key)||n.get(this.key);if(t){const e=this.key.substring(this.key.indexOf(" ")+1),s=t.stacks.map((t=>Ie`<call-stack stack=${t} />`));return Ie`
          <div class="dbEntry">
            <span class="dbCount">Count: ${t.count}</span>
            <span class="dbRows">Rows: ${t.rowCount}</span>
            <span>${e}${s}</span>
          </div>
        `}return Ie`<p>No entry found for key ${this.key}</p>`}}};t([ts({type:String})],ss.prototype,"key",void 0),ss=t([je("database-row")],ss);let ns=class extends Xe{constructor(){super(...arguments),this.stack=-1}static get styles(){return jt`
      a {
        color: var(--vscode-textLink-foreground);
        text-decoration: underline;
      }

      .stackEntryFirst {
        cursor: pointer;
      }

      .stackEntry {
        cursor: pointer;
        display: block;
        padding-left: 1em;
      }
    `}render(){var t;const e=null===(t=Ye.instance())||void 0===t?void 0:t.stacks;if(e&&this.stack>=0&&this.stack<e.length){const t=e[this.stack];if(t){let e=t.slice(1,10).map((t=>this.lineLink(t,!1)));return Ie`<details>
          <summary>${this.lineLink(t[0],!0)}</summary>
          ${e}
        </details>`}return Ie`<div class="stackEntry">No call stack available</div>`}}lineLink(t,e){const s=e?"stackEntryFirst":"stackEntry";return Ie`
      <a
        @click=${this.onCallerClick}
        class=${s}
        data-timestamp="${t.timestamp}"
        >${t.text}</a
      >
    `}onCallerClick(t){const e=t.target.getAttribute("data-timestamp");e&&k(parseInt(e))}};function is(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===s&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}t([ts({type:Number})],ns.prototype,"stack",void 0),ns=t([je("call-stack")],ns);is(".statusBar{display:flex;margin-top:10px;position:relative;white-space:nowrap;width:100%}#status{align-items:center;font-size:10pt;margin-bottom:5px;margin-top:5px}.helpIcon{height:24px;width:24px}.reason{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;margin-left:5px;min-width:13ch;overflow:hidden;padding:2px 4px;text-overflow:ellipsis}.reason,.tooltip{white-space:normal;word-break:break-word}.tooltip{background-color:var(--vscode-editor-background);color:var(--vscode-editor-foreground);padding:5px;position:absolute;top:100%;visibility:hidden;z-index:1}.reason:hover+.tooltip{visibility:visible}");is("#logSettings{min-height:27px;padding:10px 0}.setting{background-color:var(--vscode-textBlockQuote-background);display:inline-block;font-family:var(--vscode-editor-font-family);font-size:8pt;margin-bottom:5px;margin-right:5px;padding:5px}.settingTitle{font-weight:700;margin-right:2px}.settingValue{color:grey}");is(".tabHolder{background-color:var(--vscode-editorGroupHeader-tabsBackground);display:flex}.tab{background-color:var(--vscode-tab-background);border:1px solid var(--vscode-tab-border);color:var(--vscode-tab-inactiveForeground);cursor:pointer;display:inline-block;padding:5px 10px}.tab.selected{background-color:var(--vscode-tab-activeBackground);border-bottom-width:0;border:1px solid var(--vscode-tab-activeBorder);color:var(--vscode-tab-activeForeground);cursor:default}.tabPad{flex-grow:1}.tabber{border-top-width:0;flex:1;margin-bottom:20px;padding-top:10px}.tabItem{display:none;height:100%}.tabItem.selected{display:flex;flex-direction:column}.helpLink{background-color:var(--vscode-tab-background);border:1px solid var(--vscode-tab-border);color:var(--vscode-tab-inactiveForeground);cursor:pointer;display:inline-block;padding:5px 10px}");is("#timeInMS{width:4rem}.buttonContainer{align-items:center;display:flex;flex-direction:row;margin-bottom:10px;padding:5px}.buttonContainer button,.filterItem{margin:5px}#treeScroll{flex:1;overflow:scroll}#tree,#treeScroll{white-space:nowrap}#tree{height:0}#tree .count{color:red;margin-right:5px}.node{margin-top:2px;white-space:pre}.node.system{display:block}.node.formula{display:inline-block}.childContainer{margin-left:24px}.block{margin-top:2px;padding-left:1em;text-indent:-1em;white-space:pre}.detail{display:none}.toggle{border:1px solid silver;cursor:pointer;display:inline-block;line-height:10px;margin-right:4px;padding:2px;text-align:center;width:10px}.hide{display:none}");is("#timelineView{height:75%;position:relative}#tooltip{color:var(--vscode-editor-foreground);display:none;max-width:90%;padding:5px;position:absolute;z-index:1000}#timeline,#tooltip{background-color:var(--vscode-editor-background)}#timeline{height:auto;width:100%;z-index:0}#timelineKey{margin-top:5px}#timelineWrapper{flex:1;overflow:hidden}#timelineKey .keyEntry{display:inline-block;font-size:8pt;margin-right:5px;padding:4px}#timelineView>.buttonContainer{align-items:center;display:flex;flex-direction:row;margin-bottom:10px;padding:5px}");is(".analysisSettings{margin-bottom:10px;padding:10px}.analysisScroller{flex:1;overflow:scroll}#analysis{height:0}.analysis .row{display:flex}.analysis .row span{margin:2px}.analysis .row.data span{background-color:var(--vscode-editorGroupHeader-tabsBackground)}.analysis .row .name{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.analysis .row .count{min-width:50px;text-align:right}.analysis .row .duration,.analysis .row .selfTime{min-width:110px;text-align:right}#analysisView>.buttonContainer{align-items:center;margin:5px;padding:5px}");let os,rs,cs;function ls(t,s,n,i){return e(this,void 0,void 0,(function*(){const o=document.getElementById("status"),r=document.createElement("span"),c=document.createElement("a"),a=document.createElement("span"),d=os?(os/1e6).toFixed(2)+" MB":"",u=h?(h/1e9).toFixed(3)+" Sec":"",p=d||u?"("+d+(d&&u?", ":"")+u+")":"";c.setAttribute("href","#"),c.appendChild(document.createTextNode(t)),c.addEventListener("click",(()=>O().openPath(s))),r.appendChild(c),r.appendChild(document.createTextNode(p+"-")),a.innerText=n,a.style.color=i,o.innerHTML="",o.appendChild(r),o.appendChild(a),Array.isArray(l)&&l.forEach((t=>{const e=document.createElement("span");e.innerText=t.reason,e.className="reason",e.style.backgroundColor=t.color;const s=document.createElement("span");s.className="tooltip",s.innerText=t.reason,o.appendChild(e),o.appendChild(s)})),yield function(){return e(this,void 0,void 0,(function*(){yield new Promise((t=>window.requestAnimationFrame(t))),yield new Promise((t=>setTimeout(t)))}))}()}))}function as(t){return e(this,void 0,void 0,(function*(){const e=t.children,s=e.length;t.containsDml=0,t.containsSoql=0,t.containsThrown=0;for(let n=0;n<s;++n){const s=e[n];s instanceof _&&("DML_BEGIN"===s.type&&++t.containsDml,"SOQL_EXECUTE_BEGIN"===s.type&&++t.containsSoql,"EXCEPTION_THROWN"===s.type&&++t.containsThrown,as(s),t.containsDml+=s.containsDml,t.containsSoql+=s.containsSoql,t.containsThrown+=s.containsThrown)}}))}function ds(t){return e(this,void 0,void 0,(function*(){const e=t.children,s="DML_BEGIN"===t.type;let n=null,i=0;for(;i<e.length;){const t=e[i],o=t.type;if(n&&t instanceof _){if("ENTERING_MANAGED_PKG"===o&&t.namespace===n.namespace){e.splice(i,1),n.exitStamp=t.exitStamp,n.recalculateDurations();continue}if(s&&("DML_BEGIN"===o||"SOQL_EXECUTE_BEGIN"===o)||"EXCEPTION_THROWN"===o){e.splice(i,1),n.children&&n.children.push(t),n.containsDml=t.containsDml+("DML_BEGIN"===o?1:0),n.containsSoql=t.containsSoql+("SOQL_EXECUTE_BEGIN"===o?1:0),n.containsThrown=t.containsThrown+("EXCEPTION_THROWN"===o?1:0),n.exitStamp=t.exitStamp,n.recalculateDurations(),t instanceof x&&(yield ds(t));continue}++i}else++i;t instanceof x&&(yield ds(t)),n="ENTERING_MANAGED_PKG"===o?t:null}}))}function us(t){const e=Date.now();rs&&console.debug(rs+" = "+(e-cs)+"ms"),rs=t,cs=e}function hs(t){return e(this,void 0,void 0,(function*(){const e=document.getElementById("logSettings");e.innerHTML="";const s=document.createDocumentFragment();for(const{key:e,level:n}of t)if("NONE"!==n){const t=document.createElement("div"),i=document.createElement("span"),o=document.createElement("span");i.innerText=e+":",i.className="settingTitle",o.innerText=n,o.className="settingValue",t.className="setting",t.appendChild(i),t.appendChild(o),s.appendChild(t)}e.appendChild(s)}))}function ps(t,s,n){return e(this,void 0,void 0,(function*(){os=t.length,yield ls(s,n,"Processing...","black"),us("parseLog"),yield Promise.all([hs(b(t)),L(t)]),us("getRootMethod");const e=function(){const t=new E(a),e=new T,s=[];let n;for(u=null;n=t.fetch();)n.loadContent(t,s),e.addChild(n);return e.setEndTime(),h=e.exitStamp||0,e}();us("analyse"),yield Promise.all([Ze(e),as(e)]),yield ds(e),yield Promise.all([Bt(e),Ye.create(e)]),yield ls(s,n,"Rendering...","black"),us("renderViews"),yield Promise.all([z(e),vt(e),zt(),Qe()]),us(""),ls(s,n,"Ready",l.length>0?"red":"green")}))}function Es(t){n(t.target.id)}is("#dbScroller{flex:1;overflow:scroll}#dbContent{height:0}"),window.addEventListener("DOMContentLoaded",(function(t){const e=document.querySelector(".tabHolder");null==e||e.querySelectorAll(".tab").forEach((t=>t.addEventListener("click",Es)));const s=document.querySelector(".helpLink");s&&s.addEventListener("click",(()=>O().openHelp())),O().getConfig(),function(){var t,e,s,n,i;const o=null===(t=document.getElementById("LOG_FILE_NAME"))||void 0===t?void 0:t.innerHTML,r=null===(e=document.getElementById("LOG_FILE_PATH"))||void 0===e?void 0:e.innerHTML,c=null===(s=document.getElementById("LOG_FILE_NS"))||void 0===s?void 0:s.innerHTML,l=null===(n=document.getElementById("LOG_FILE_URI"))||void 0===n?void 0:n.innerHTML;window.activeNamespaces=null!==(i=null==c?void 0:c.split(","))&&void 0!==i?i:[],l&&fetch(l).then((t=>t.text())).then((t=>{ps(null!=t?t:"",null!=o?o:"",null!=r?r:"")}))}()})),window.addEventListener("message",(function(t){const e=t.data;if("getConfig"===e.command)!function(t){for(const e of et.values()){const s=t[e.label];s&&(e.fillColor=s)}}(e.data.timeline.colors),Nt()}));
//# sourceMappingURL=bundle.js.map
